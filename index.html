<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Game Burung - barIsHere</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: #87CEEB;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background: linear-gradient(to top, #87CEEB, #ffffff);
      border-bottom: 10px solid #228B22;
    }
    #ui {
      position: absolute;
      top: 10px;
      left: 10px;
      color: white;
      font-weight: bold;
      font-size: 18px;
      text-shadow: 1px 1px 3px black;
    }
    #gameOver {
      display: none;
      position: absolute;
      top: 45%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 36px;
      color: red;
      font-weight: bold;
    }
    #restartBtn {
      display: none;
      position: absolute;
      top: 55%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 10px 20px;
      font-size: 18px;
      cursor: pointer;
      background: white;
      border: 2px solid black;
    }
    #copyright {
      position: absolute;
      bottom: 10px;
      left: 10px;
      font-size: 14px;
      color: white;
      text-shadow: 1px 1px 2px black;
    }
  </style>
</head>
<body>
  <canvas id="game" width="480" height="640"></canvas>
  <div id="ui">Score: 0 | High Score: 0</div>
  <div id="gameOver">GAME OVER</div>
  <button id="restartBtn">Main Lagi</button>
  <div id="copyright">© • Developer barIsHere - 2025</div>

  <script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const ui = document.getElementById('ui');
    const gameOverEl = document.getElementById('gameOver');
    const restartBtn = document.getElementById('restartBtn');

    // Ganti warna burung jadi hex supaya shadeColor bisa jalan
    const birdColors = ['#ff4444', '#4466ff'];

    const bird = {
      x: 100,
      y: 200,
      w: 30,
      h: 30,
      color: birdColors[Math.floor(Math.random() * birdColors.length)],
      velocity: 0,
      gravity: 0.7,
      jump: -4
    };

    let pipes = [], meteors = [], birds = [], clouds = [], spikes = [];
    let score = 0;
    let highScore = localStorage.getItem('highScore') || 0;
    let scrollX = 0;
    let gameOver = false;

    function resetGame() {
      bird.y = 200;
      bird.velocity = 0;
      score = 0;
      scrollX = 0;
      gameOver = false;
      bird.color = birdColors[Math.floor(Math.random() * birdColors.length)];
      pipes = []; meteors = []; birds = []; clouds = []; spikes = [];
      gameOverEl.style.display = 'none';
      restartBtn.style.display = 'none';
      for (let i = 0; i < 10; i++) {
        pipes.push(createPipe(600 + i * 300));
        meteors.push(createMeteor(800 + i * 400));
        birds.push(createEnemyBird(900 + i * 400));
        clouds.push(createCloud());
        spikes.push(createSpike(500 + i * 200));
      }
      loop();
    }

    function createPipe(x) {
      const gap = 140;
      const topHeight = Math.random() * 200 + 50;
      return { x, topHeight, gap, passed: false };
    }

    function createMeteor(x) {
      return { x, y: 0, size: 30 + Math.random() * 20, speed: 2 + Math.random() * 2 };
    }

    function createEnemyBird(x) {
      return { x, y: 100 + Math.random() * 400, size: 25, dir: Math.random() > 0.5 ? 1 : -1 };
    }

    function createCloud() {
      return { x: Math.random() * 1000, y: Math.random() * 150, speed: 0.2 + Math.random() * 0.5 };
    }

    function createSpike(x) {
      return { x, w: 20, h: 20, enabled: Math.random() < 0.5 };
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Awan
      ctx.fillStyle = 'white';
      clouds.forEach(cloud => {
        ctx.beginPath();
        ctx.arc(cloud.x - scrollX * cloud.speed, cloud.y, 30, 0, Math.PI * 2);
        ctx.fill();
      });

      // Pipa
      ctx.fillStyle = '#003366';
      pipes.forEach(p => {
        const px = p.x - scrollX;
        ctx.fillRect(px, 0, 50, p.topHeight);
        ctx.fillRect(px, p.topHeight + p.gap, 50, canvas.height - (p.topHeight + p.gap) - 50);
      });

      // Meteor
      ctx.fillStyle = 'orange';
      meteors.forEach(m => {
        const mx = m.x - scrollX;
        ctx.beginPath();
        ctx.arc(mx, m.y, m.size / 2, 0, Math.PI * 2);
        ctx.fill();
        m.y += m.speed;
      });

      // Burung musuh
      ctx.fillStyle = 'black';
      birds.forEach(b => {
        const bx = b.x - scrollX;
        ctx.fillRect(bx, b.y, b.size, b.size);
        b.y += b.dir * 1.5;
        if (b.y < 50 || b.y > canvas.height - 100) b.dir *= -1;
      });

      // Duri
      ctx.fillStyle = 'gray';
      spikes.forEach(spike => {
        if (!spike.enabled) return;
        const sx = spike.x - scrollX;
        ctx.beginPath();
        ctx.moveTo(sx, canvas.height - 10);
        ctx.lineTo(sx + spike.w / 2, canvas.height - 10 - spike.h);
        ctx.lineTo(sx + spike.w, canvas.height - 10);
        ctx.fill();
      });

      // Burung pemain
      drawBird();
    }

    function update() {
      bird.velocity += bird.gravity;
      bird.y += bird.velocity;
      scrollX += 2;

      if (bird.y + bird.h / 2 > canvas.height - 10 || bird.y < 0) return endGame();

      pipes.forEach(p => {
        const px = p.x - scrollX;
        if (
          bird.x + bird.w / 2 > px &&
          bird.x - bird.w / 2 < px + 50 &&
          (bird.y - bird.h / 2 < p.topHeight ||
           bird.y + bird.h / 2 > p.topHeight + p.gap)
        ) return endGame();
        if (!p.passed && px + 50 < bird.x) {
          score++;
          p.passed = true;
        }
      });

      meteors.forEach(m => {
        const mx = m.x - scrollX;
        const dist = Math.hypot(mx - bird.x, m.y - bird.y);
        if (dist < m.size / 2 + bird.w / 2) return endGame();
      });

      // Cek tabrakan dengan burung musuh
      birds.forEach(b => {
        const bx = b.x - scrollX;
        if (
          bird.x + bird.w / 2 > bx &&
          bird.x - bird.w / 2 < bx + b.size &&
          bird.y + bird.h / 2 > b.y &&
          bird.y - bird.h / 2 < b.y + b.size
        ) return endGame();
      });

      // Cek tabrakan dengan duri di tanah
      spikes.forEach(spike => {
        if (!spike.enabled) return;
        const sx = spike.x - scrollX;
        if (
          bird.x + bird.w / 2 > sx &&
          bird.x - bird.w / 2 < sx + spike.w &&
          bird.y + bird.h / 2 > canvas.height - 10 - spike.h
        ) return endGame();
      });
    }

    function endGame() {
      gameOver = true;
      gameOverEl.style.display = 'block';
      restartBtn.style.display = 'block';
      if (score > highScore) {
        highScore = score;
        localStorage.setItem('highScore', highScore);
      }
    }

    function loop() {
      if (gameOver) return;
      update();
      draw();
      ui.textContent = `Score: ${score} | High Score: ${highScore}`;
      requestAnimationFrame(loop);
    }

    function jump() {
      if (gameOver) return;
      bird.velocity = bird.jump;
    }

    // Event listeners untuk lompat
    window.addEventListener('keydown', e => {
      if (e.code === 'Space') {
        e.preventDefault();
        jump();
      }
    });

    window.addEventListener('mousedown', e => {
      jump();
    });

    restartBtn.addEventListener('click', () => {
      resetGame();
    });

    // Fungsi bantu untuk membuat warna lebih gelap/terang
    function shadeColor(color, percent) {
      let f = parseInt(color.slice(1), 16),
          t = percent < 0 ? 0 : 255,
          p = percent < 0 ? percent * -1 : percent,
          R = f >> 16,
          G = (f >> 8) & 0x00FF,
          B = f & 0x0000FF;
      return "#" + (0x1000000 + 
          (Math.round((t - R) * p) + R) * 0x10000 + 
          (Math.round((t - G) * p) + G) * 0x100 + 
          (Math.round((t - B) * p) + B))
          .toString(16).slice(1);
    }

    // Fungsi gambar burung pemain
function drawBird() {
  const x = bird.x;
  const y = bird.y;
  const w = bird.w;
  const h = bird.h;
  const color = bird.color;

  ctx.save();

  // Badan (pakai kurva bezier supaya gak oval polos)
  ctx.fillStyle = color;
  ctx.beginPath();
  ctx.moveTo(x - w * 0.6, y);
  ctx.bezierCurveTo(
    x - w * 0.3, y - h * 0.8,
    x + w * 0.5, y - h * 0.6,
    x + w * 0.6, y
  );
  ctx.bezierCurveTo(
    x + w * 0.5, y + h * 0.6,
    x - w * 0.3, y + h * 0.8,
    x - w * 0.6, y
  );
  ctx.closePath();
  ctx.fill();

  // Sayap (pakai kurva untuk bentuk seperti sayap terlipat)
  ctx.fillStyle = shadeColor(color, -30);
  ctx.beginPath();
  ctx.moveTo(x - w * 0.2, y);
  ctx.bezierCurveTo(
    x + w * 0.1, y - h * 0.4,
    x + w * 0.4, y - h * 0.3,
    x + w * 0.3, y
  );
  ctx.bezierCurveTo(
    x + w * 0.4, y + h * 0.3,
    x + w * 0.1, y + h * 0.4,
    x - w * 0.2, y
  );
  ctx.closePath();
  ctx.fill();

  // Kepala (bulat)
  ctx.fillStyle = color;
  ctx.beginPath();
  ctx.arc(x + w * 0.7, y - h * 0.15, w * 0.25, 0, Math.PI * 2);
  ctx.fill();

  // Paruh (segitiga)
  ctx.fillStyle = shadeColor(color, -50);
  ctx.beginPath();
  ctx.moveTo(x + w * 0.9, y - h * 0.15);
  ctx.lineTo(x + w * 1.1, y - h * 0.05);
  ctx.lineTo(x + w * 0.9, y + h * 0.05);
  ctx.closePath();
  ctx.fill();

  // Ekor (segitiga runcing)
  ctx.fillStyle = shadeColor(color, -30);
  ctx.beginPath();
  ctx.moveTo(x - w * 0.6, y);
  ctx.lineTo(x - w * 1.1, y - h * 0.3);
  ctx.lineTo(x - w * 0.9, y + h * 0.3);
  ctx.closePath();
  ctx.fill();

  // Mata (putih + pupil hitam)
  ctx.fillStyle = 'white';
  ctx.beginPath();
  ctx.arc(x + w * 0.8, y - h * 0.25, w * 0.12, 0, Math.PI * 2);
  ctx.fill();

  ctx.fillStyle = 'black';
  ctx.beginPath();
  ctx.arc(x + w * 0.8, y - h * 0.25, w * 0.06, 0, Math.PI * 2);
  ctx.fill();

  ctx.restore();
}

   // Mulai game
    resetGame();
  </script>
</body>
</html>
